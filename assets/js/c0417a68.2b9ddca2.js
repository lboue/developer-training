"use strict";(self.webpackChunkgolioth_developer_training=self.webpackChunkgolioth_developer_training||[]).push([[315],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>m});var o=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=o.createContext({}),p=function(e){var t=o.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(a),m=n,h=u["".concat(s,".").concat(m)]||u[m]||d[m]||r;return a?o.createElement(h,l(l({ref:t},c),{},{components:a})):o.createElement(h,l({ref:t},c))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,l=new Array(r);l[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:n,l[1]=i;for(var p=2;p<r;p++)l[p]=a[p];return o.createElement.apply(null,l)}return o.createElement.apply(null,a)}u.displayName="MDXCreateElement"},5162:(e,t,a)=>{a.d(t,{Z:()=>l});var o=a(7294),n=a(6010);const r="tabItem_Ymn6";function l(e){let{children:t,hidden:a,className:l}=e;return o.createElement("div",{role:"tabpanel",className:(0,n.Z)(r,l),hidden:a},t)}},5488:(e,t,a)=>{a.d(t,{Z:()=>m});var o=a(7462),n=a(7294),r=a(6010),l=a(2389),i=a(7392),s=a(7094),p=a(2466);const c="tabList__CuJ",d="tabItem_LNqP";function u(e){var t;const{lazy:a,block:l,defaultValue:u,values:m,groupId:h,className:g}=e,f=n.Children.map(e.children,(e=>{if((0,n.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),b=m??f.map((e=>{let{props:{value:t,label:a,attributes:o}}=e;return{value:t,label:a,attributes:o}})),k=(0,i.l)(b,((e,t)=>e.value===t.value));if(k.length>0)throw new Error(`Docusaurus error: Duplicate values "${k.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const y=null===u?u:u??(null==(t=f.find((e=>e.props.default)))?void 0:t.props.value)??f[0].props.value;if(null!==y&&!b.some((e=>e.value===y)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${y}" but none of its children has the corresponding value. Available values are: ${b.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:w,setTabGroupChoices:v}=(0,s.U)(),[N,T]=(0,n.useState)(y),x=[],{blockElementScrollPositionUntilNextRender:D}=(0,p.o5)();if(null!=h){const e=w[h];null!=e&&e!==N&&b.some((t=>t.value===e))&&T(e)}const M=e=>{const t=e.currentTarget,a=x.indexOf(t),o=b[a].value;o!==N&&(D(t),T(o),null!=h&&v(h,String(o)))},O=e=>{var t;let a=null;switch(e.key){case"ArrowRight":{const t=x.indexOf(e.currentTarget)+1;a=x[t]??x[0];break}case"ArrowLeft":{const t=x.indexOf(e.currentTarget)-1;a=x[t]??x[x.length-1];break}}null==(t=a)||t.focus()};return n.createElement("div",{className:(0,r.Z)("tabs-container",c)},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":l},g)},b.map((e=>{let{value:t,label:a,attributes:l}=e;return n.createElement("li",(0,o.Z)({role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,key:t,ref:e=>x.push(e),onKeyDown:O,onFocus:M,onClick:M},l,{className:(0,r.Z)("tabs__item",d,null==l?void 0:l.className,{"tabs__item--active":N===t})}),a??t)}))),a?(0,n.cloneElement)(f.filter((e=>e.props.value===N))[0],{className:"margin-top--md"}):n.createElement("div",{className:"margin-top--md"},f.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==N})))))}function m(e){const t=(0,l.Z)();return n.createElement(u,(0,o.Z)({key:String(t)},e))}},7009:(e,t,a)=>{a.d(t,{ZP:()=>l});var o=a(7462),n=(a(7294),a(3905));const r={toc:[]};function l(e){let{components:t,...l}=e;return(0,n.kt)("wrapper",(0,o.Z)({},r,l,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("br",null),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Show me how to download from KASM"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"How to download binaries from KASM",src:a(1403).Z,width:"1712",height:"982"})),(0,n.kt)("p",null,"Because KASM is a virtual machine running in the cloud, we can not directly program the MagTag connected to your local machine. Instead, we will download the binary so that your local machine can program that file to the MagTag in the next step."),(0,n.kt)("p",null,'The image above shows the left sidebar menu of KASM with the Download widget selected. Click the "DOWNLOAD" button next to the ',(0,n.kt)("inlineCode",{parentName:"p"},"merged.bin")," file to download your recently compiled code.")))}l.isMDXComponent=!0},873:(e,t,a)=>{a.d(t,{ZP:()=>s});var o=a(7462),n=(a(7294),a(3905)),r=a(5488),l=a(5162);const i={toc:[]};function s(e){let{components:t,...s}=e;return(0,n.kt)("wrapper",(0,o.Z)({},i,s,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Use the USB cable to plug the MagTag into your local computer. Ensure the\npower switch is in the 'On' position.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Put the MagTag into DFU bootloader mode"),(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Hold down the Boot0 button")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Press and release the Reset button"),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"MagTag Boot0 and Reset buttons",src:a(8606).Z,width:"1000",height:"643"})))))),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Run the flash command on your local machine:"),(0,n.kt)(r.Z,{groupId:"os",defaultValue:"linux",values:[{label:"Linux/MacOS",value:"linux"},{label:"Windows",value:"windows"}],mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"linux",mdxType:"TabItem"},(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre"},"cd ~/Downloads\nesptool.py --chip esp32s2 --port /dev/ttyACM0 write_flash 0x0 merged.bin\n"))),(0,n.kt)(l.Z,{value:"windows",mdxType:"TabItem"},(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre"},"cd %HOMEPATH%/Downloads\npython -m esptool --chip esp32s2 --port com3 write_flash 0x0 merged.bin\n")),(0,n.kt)("admonition",{parentName:"li",type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"The port for your MagTag may be different from the ",(0,n.kt)("inlineCode",{parentName:"p"},"com3")," shown above.\nFind this value in the Device Manager. Here's ",(0,n.kt)("a",{parentName:"p",href:"https://www.loom.com/share/cde8204ea8b341d892f6ad21ed43ac82"},"a video walkthrough of the\nprocess"),"."))))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Press the MagTag ",(0,n.kt)("strong",{parentName:"p"},"Reset")," button to start the new firmware"))),(0,n.kt)("br",null),(0,n.kt)("admonition",{type:"note"},(0,n.kt)("p",{parentName:"admonition"},"If the flash is successful, ",(0,n.kt)("strong",{parentName:"p"},"you will receive an error message")," telling you that you must manually reset the device. Remember to press the reset button to run the newly flashed program. ",(0,n.kt)("a",{parentName:"p",href:"/docs/zephyr-intro/zephyr-tips#you-must-press-the-reset-button-after-flashing-firmware"},"Learn more about this"),"."),(0,n.kt)("p",{parentName:"admonition"},"On some machines you will only have a few seconds to run the ",(0,n.kt)("inlineCode",{parentName:"p"},"esptool.py")," command after entering bootloader mode. ",(0,n.kt)("a",{parentName:"p",href:"/docs/zephyr-intro/zephyr-tips#errors-with-west-build-zephyr-tree-and-esp32-environmental-variables"},"Learn more about this"),".")))}s.isMDXComponent=!0},5059:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>i,metadata:()=>p,toc:()=>d});var o=a(7462),n=(a(7294),a(3905)),r=a(7009),l=a(873);const i={sidebar_position:2},s="Add Credentials to the Golioth Demo",p={unversionedId:"golioth-exercises/compile-golioth-demo",id:"golioth-exercises/compile-golioth-demo",title:"Add Credentials to the Golioth Demo",description:"We begin with a full-featured demo! But for the MagTag to connect we must give",source:"@site/docs/golioth-exercises/compile-golioth-demo.md",sourceDirName:"golioth-exercises",slug:"/golioth-exercises/compile-golioth-demo",permalink:"/docs/golioth-exercises/compile-golioth-demo",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Install esptool on your local machine",permalink:"/docs/golioth-exercises/install_esptool"},next:{title:"Exploring Golioth using the MagTag",permalink:"/docs/golioth-exercises/golioth-explore"}},c={},d=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Desired outcome(s)",id:"desired-outcomes",level:3},{value:"Time Estimate",id:"time-estimate",level:3},{value:"Workflow",id:"workflow",level:2},{value:"Build in the KASM container",id:"build-in-the-kasm-container",level:3},{value:"Update MagTag firmware from your local machine",id:"update-magtag-firmware-from-your-local-machine",level:3},{value:"Expected Results",id:"expected-results",level:2}],u={toc:d};function m(e){let{components:t,...i}=e;return(0,n.kt)("wrapper",(0,o.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"add-credentials-to-the-golioth-demo"},"Add Credentials to the Golioth Demo"),(0,n.kt)("p",null,"We begin with a full-featured demo! But for the MagTag to connect we must give\nit one set of credentials to connect to your WiFi and another set of credentials\nto connect to Golioth that you created in the ",(0,n.kt)("a",{parentName:"p",href:"/docs/golioth-intro/signup"},"Golioth Signup and Exploration")," section."),(0,n.kt)("h2",{id:"learning-objectives"},"Learning Objectives"),(0,n.kt)("p",null,"We are building your muscles around compiling Zephyr binaries, by starting with pre-configured code. All you need to do is add credentials, compile, and load the binary onto your device. "),(0,n.kt)("p",null,"We are doing this so you can use this hardware and firmware on the MagTag to experiment with features on Golioth in the next section. "),(0,n.kt)("h3",{id:"desired-outcomes"},"Desired outcome(s)"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Create a customized file containing your credentials for Wi-Fi and Golioth."),(0,n.kt)("li",{parentName:"ul"},"Build a binary containing those credentials."),(0,n.kt)("li",{parentName:"ul"},"Download the built binary and load it onto the MagTag hardware."),(0,n.kt)("li",{parentName:"ul"},"See the device connect to Golioth over WiFi")),(0,n.kt)("h3",{id:"time-estimate"},"Time Estimate"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"This section will take 5-20 minutes",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Depending on experience with Zephyr and the ",(0,n.kt)("inlineCode",{parentName:"li"},"west")," meta tool.")))),(0,n.kt)("h2",{id:"workflow"},"Workflow"),(0,n.kt)("h3",{id:"build-in-the-kasm-container"},"Build in the KASM container"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"In the KASM container, go to your local copy of ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/golioth/magtag-demo"},"the magtag-demo\nrepository"),"."),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"cd ~/Desktop/magtag-training/app\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Create a file for WiFi and Golioth credentials"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Make a copy of ",(0,n.kt)("inlineCode",{parentName:"p"},"credentials.conf_example")," and name it ",(0,n.kt)("inlineCode",{parentName:"p"},"credentials.conf")),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre"},"cp credentials.conf_example credentials.conf\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Edit this new file to include your WiFi credentials and the PSK-ID/PSK\nfrom the device page on your ",(0,n.kt)("a",{parentName:"p",href:"https://console.golioth.io/"},"Golioth\nconsole"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"This file will be ignored by git, and may be reused in other examples.")))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Build the example, including the credentials file you just created"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"west build -b esp32s2_saola golioth-demo -p\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Download the binary"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Run ",(0,n.kt)("inlineCode",{parentName:"li"},"getbin")," to package the compiled code and make it available for download"),(0,n.kt)("li",{parentName:"ul"},"Use the Download option in KASM's left sidebar to download ",(0,n.kt)("inlineCode",{parentName:"li"},"merged.bin")," to your local machine.")),(0,n.kt)(r.ZP,{mdxType:"HowToDownload"}))),(0,n.kt)("h3",{id:"update-magtag-firmware-from-your-local-machine"},"Update MagTag firmware from your local machine"),(0,n.kt)(l.ZP,{mdxType:"VerboseFlash"}),(0,n.kt)("h2",{id:"expected-results"},"Expected Results"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Golioth Demo connected to Wifi and the Golioth Servers",src:a(5146).Z,width:"1280",height:"720"})),(0,n.kt)("p",null,"After flashing the example you need to press the Reset button to run the\nprogram. Your MagTag may not visibly react for a few seconds as it initializes\nthe WiFi hardware. The two center LEDs will turn blue as the board attempts to\nconnect to the internet and establish a secure connection with Golioth. The\nGolioth logo will be displayed on the ePaper screen during this time."),(0,n.kt)("p",null,'When a connection is established, the four LEDs will turn to yellow, blue,\ngreen, and red and the MagTag show a "Connected to Golioth!"'))}m.isMDXComponent=!0},1403:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/kasm_download_binary-4a72cb33f6d8e6385c88d1f0ae790c23.png"},8606:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/magtag-bootloader-mode-5c7952ae3bb40ddc89a40e0f41cf721f.jpg"},5146:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/magtag-golioth-connected-a75627f7ed7bd5b7096a0e684d89362c.jpg"}}]);