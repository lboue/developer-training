"use strict";(self.webpackChunkgolioth_developer_training=self.webpackChunkgolioth_developer_training||[]).push([[402],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>d});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=a.createContext({}),u=function(e){var t=a.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),h=u(r),d=n,m=h["".concat(s,".").concat(d)]||h[d]||c[d]||o;return r?a.createElement(m,i(i({ref:t},p),{},{components:r})):a.createElement(m,i({ref:t},p))}));function d(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var u=2;u<o;u++)i[u]=r[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}h.displayName="MDXCreateElement"},5162:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(7294),n=r(6010);const o="tabItem_Ymn6";function i(e){let{children:t,hidden:r,className:i}=e;return a.createElement("div",{role:"tabpanel",className:(0,n.Z)(o,i),hidden:r},t)}},5488:(e,t,r)=>{r.d(t,{Z:()=>d});var a=r(7462),n=r(7294),o=r(6010),i=r(2389),l=r(7392),s=r(7094),u=r(2466);const p="tabList__CuJ",c="tabItem_LNqP";function h(e){var t;const{lazy:r,block:i,defaultValue:h,values:d,groupId:m,className:f}=e,g=n.Children.map(e.children,(e=>{if((0,n.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),y=d??g.map((e=>{let{props:{value:t,label:r,attributes:a}}=e;return{value:t,label:r,attributes:a}})),v=(0,l.l)(y,((e,t)=>e.value===t.value));if(v.length>0)throw new Error(`Docusaurus error: Duplicate values "${v.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const b=null===h?h:h??(null==(t=g.find((e=>e.props.default)))?void 0:t.props.value)??g[0].props.value;if(null!==b&&!y.some((e=>e.value===b)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${b}" but none of its children has the corresponding value. Available values are: ${y.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:w,setTabGroupChoices:k}=(0,s.U)(),[N,T]=(0,n.useState)(b),E=[],{blockElementScrollPositionUntilNextRender:O}=(0,u.o5)();if(null!=m){const e=w[m];null!=e&&e!==N&&y.some((t=>t.value===e))&&T(e)}const x=e=>{const t=e.currentTarget,r=E.indexOf(t),a=y[r].value;a!==N&&(O(t),T(a),null!=m&&k(m,String(a)))},C=e=>{var t;let r=null;switch(e.key){case"ArrowRight":{const t=E.indexOf(e.currentTarget)+1;r=E[t]??E[0];break}case"ArrowLeft":{const t=E.indexOf(e.currentTarget)-1;r=E[t]??E[E.length-1];break}}null==(t=r)||t.focus()};return n.createElement("div",{className:(0,o.Z)("tabs-container",p)},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":i},f)},y.map((e=>{let{value:t,label:r,attributes:i}=e;return n.createElement("li",(0,a.Z)({role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,key:t,ref:e=>E.push(e),onKeyDown:C,onFocus:x,onClick:x},i,{className:(0,o.Z)("tabs__item",c,null==i?void 0:i.className,{"tabs__item--active":N===t})}),r??t)}))),r?(0,n.cloneElement)(g.filter((e=>e.props.value===N))[0],{className:"margin-top--md"}):n.createElement("div",{className:"margin-top--md"},g.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==N})))))}function d(e){const t=(0,i.Z)();return n.createElement(h,(0,a.Z)({key:String(t)},e))}},1922:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>d,frontMatter:()=>l,metadata:()=>u,toc:()=>c});var a=r(7462),n=(r(7294),r(3905)),o=r(5488),i=r(5162);const l={sidebar_position:4},s="Zephyr Tips and Gotchas",u={unversionedId:"zephyr-intro/zephyr-tips",id:"zephyr-intro/zephyr-tips",title:"Zephyr Tips and Gotchas",description:"Use this page as a reference for reminders and common gotchas.",source:"@site/docs/zephyr-intro/zephyr-tips.md",sourceDirName:"zephyr-intro",slug:"/zephyr-intro/zephyr-tips",permalink:"/docs/zephyr-intro/zephyr-tips",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Golioth Observe Example",permalink:"/docs/zephyr-intro/zephyr-examples/golioth-observe"},next:{title:"Basic I/O Exercises",permalink:"/docs/category/basic-io-exercises"}},p={},c=[{value:"The MagTag has a power switch",id:"the-magtag-has-a-power-switch",level:2},{value:"You must press the reset button after flashing firmware",id:"you-must-press-the-reset-button-after-flashing-firmware",level:2},{value:"Errors with <code>west build</code>: Zephyr tree and virtual environment",id:"errors-with-west-build-zephyr-tree-and-virtual-environment",level:2},{value:"Errors when flashing the MagTag",id:"errors-when-flashing-the-magtag",level:2}],h={toc:c};function d(e){let{components:t,...l}=e;return(0,n.kt)("wrapper",(0,a.Z)({},h,l,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"zephyr-tips-and-gotchas"},"Zephyr Tips and Gotchas"),(0,n.kt)("p",null,"Use this page as a reference for reminders and common gotchas."),(0,n.kt)("h2",{id:"the-magtag-has-a-power-switch"},"The MagTag has a power switch"),(0,n.kt)("p",null,"The MagTag has a toggle switch for power. When in the ",(0,n.kt)("inlineCode",{parentName:"p"},"on")," position, a green LED will be illuminated on the underside of the board."),(0,n.kt)("h2",{id:"you-must-press-the-reset-button-after-flashing-firmware"},"You must press the reset button after flashing firmware"),(0,n.kt)("p",null,"Currently, it is not possible for the ",(0,n.kt)("inlineCode",{parentName:"p"},"west flash")," command to automatically reset the MagTag after successfully programming the firmware. "),(0,n.kt)("p",null,"It can be confusing when you expect the program to begin running right away and it does not. Because of this, the default behavior is to display an error message to the user."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Error message after successfully flashing the MagTag",src:r(8828).Z,width:"1293",height:"182"})),(0,n.kt)("p",null,"This error is expected and serves as a helpful reminder that you need to hit the reset button after every flash."),(0,n.kt)("h2",{id:"errors-with-west-build-zephyr-tree-and-virtual-environment"},"Errors with ",(0,n.kt)("inlineCode",{parentName:"h2"},"west build"),": Zephyr tree and virtual environment"),(0,n.kt)("p",null,"There are a few common gotchas to calling ",(0,n.kt)("inlineCode",{parentName:"p"},"west build"),"."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"You need to be in a subdirectory of the Zephyr tree"),(0,n.kt)("li",{parentName:"ul"},"If you followed our recommendations during install, you need to enable your Python Virtual Environment")),(0,n.kt)(o.Z,{groupId:"os",defaultValue:"linux",values:[{label:"Linux/MacOS",value:"linux"},{label:"Windows",value:"windows"}],mdxType:"Tabs"},(0,n.kt)(i.Z,{value:"linux",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Navigate to the magtag-demo directory which is inside the Zephyr tree"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"cd ~/golioth-zephyr-workspace/modules/lib/golioth/samples/magtag-demo\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Activate your virtual environment"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"source ~/golioth-zephyr-workspace/.venv/bin/activate\n"))))),(0,n.kt)(i.Z,{value:"windows",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Navigate to the magtag-demo directory which is inside the Zephyr tree"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"cd C:\\golioth-zephyr-workspace\\modules\\lib\\golioth\\samples\\magtag-demo\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Activate your virtual environment"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"C:\\golioth-zephyr-workspace\\.venv\\Scripts\\activate.bat\n")))))),(0,n.kt)("h2",{id:"errors-when-flashing-the-magtag"},"Errors when flashing the MagTag"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"You may encounter ",(0,n.kt)("inlineCode",{parentName:"li"},"OSError: [Errno 71] Protocol error")," when flashing. Most often this is caused by a timeout and can usually be fixed by starting the ",(0,n.kt)("inlineCode",{parentName:"li"},"west flash")," process very quickly (one second or less) after putting the device into DFU bootloader mode."),(0,n.kt)("li",{parentName:"ul"},"If your flash command is trying to program the wrong device (e.g. ",(0,n.kt)("inlineCode",{parentName:"li"},"/dev/ttyUSB0")," instad of ",(0,n.kt)("inlineCode",{parentName:"li"},"/dev/ttyACM0"),") you can specify the device endpoint with this command: ",(0,n.kt)("inlineCode",{parentName:"li"},"west flash --esp-device /dev/ttyACM0"))))}d.isMDXComponent=!0},8828:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/golioth-west-flash-reset-error-message-2eb12648569f0fdc463cff11a2f8c1f6.png"}}]);